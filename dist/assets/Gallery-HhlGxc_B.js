import{r as s,j as e,t as w,v as b}from"./index-CU_iZQyH.js";import{f as y}from"./fakeDb-Dhi0y_oz.js";function C(){const c=y.propertyMedia?.find(t=>t.listingId===1)?.media||[],[i,h]=s.useState(0),[d,a]=s.useState(!1),[u,o]=s.useState(!1),[g,f]=s.useState("right"),l=s.useRef(null),p=s.useRef(null),m=s.useRef([]),r=c[i];if(s.useEffect(()=>{m.current[i]&&m.current[i]?.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[i]),!r)return null;const v=u?g==="right"?"animate-fade-slide-in-right":"animate-fade-slide-in-left":"";return e.jsxs("div",{className:"lg:sticky lg:top-24 lg:self-start bg-white p-4 rounded-lg shadow-border",children:[e.jsxs("div",{className:"relative mb-4 flex items-center justify-center",children:[e.jsx("div",{className:`w-full h-60 md:h-90 ${v} transition-all duration-500`,children:r.mediaType==="video"&&!d?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:r.thumbnail,alt:r.title||"Video thumbnail",className:"w-full h-full object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("button",{onClick:()=>a(!0),className:"bg-white/80 rounded-full p-4 hover:bg-white shadow","aria-label":"Play property video",title:"Play video",children:e.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#17C964"}),e.jsx("path",{d:"M16 13L28 20L16 27V13Z",fill:"white"})]})})})]}):r.mediaType==="video"&&d?e.jsxs("video",{controls:!0,autoPlay:!0,poster:r.thumbnail,onEnded:()=>a(!1),className:"w-full h-full object-cover rounded-lg",children:[e.jsx("source",{src:r.url,type:"video/mp4"}),"Your browser does not support the video tag."]},r.id):r.mediaType==="image"?e.jsx("img",{src:r.url,alt:"Property main view",className:"w-full h-full object-cover rounded-lg"}):null}),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{if(u)return;f("left"),o(!0),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>o(!1),500);const t=i===0?c.length-1:i-1;h(t),a(!1)},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-70 rounded-full p-2 hover:bg-opacity-90 transition-transform duration-200 active:scale-90","aria-label":"Previous media",title:"Previous media",children:e.jsx(w,{className:"w-6 h-6 text-gray-700"})}),e.jsx("button",{onClick:()=>{if(u)return;f("right"),o(!0),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>o(!1),500);const t=i===c.length-1?0:i+1;h(t),a(!1)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-70 rounded-full p-2 hover:bg-opacity-90 transition-transform duration-200 active:scale-90","aria-label":"Next media",title:"Next media",children:e.jsx(b,{className:"w-6 h-6 text-gray-700"})})]}),r.mediaType==="video"&&d&&e.jsx("button",{onClick:()=>a(!1),className:"absolute top-3 right-3 bg-white/90 rounded-full px-2 py-1 text-sm hover:bg-white","aria-label":"Close video",title:"Close video",children:"âœ•"})]}),e.jsx("div",{ref:p,className:"flex gap-2 overflow-x-auto pb-2 pt-2 h-28.75",children:c.map((t,n)=>e.jsxs("button",{ref:x=>{m.current[n]=x},onClick:()=>{u||n===i||(f(n>i?"right":"left"),o(!0),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>o(!1),500),h(n),a(!1))},className:`cursor-pointer relative shrink-0 w-28 h-20 rounded-lg overflow-hidden group transition-all duration-300 ${n===i?"ring-2 ring-primary scale-105 opacity-100 z-10":"opacity-70 hover:opacity-100"}`,"aria-label":t.mediaType==="video"?`Play ${t.title||"video"}`:"View image",title:t.mediaType==="video"?t.title||"Video":"Image",style:{zIndex:n===i?2:1},children:[e.jsx("img",{src:t.thumbnail,alt:t.mediaType==="video"?t.title||"Video":"Image",className:"w-full h-full object-cover transition-transform duration-300"}),t.mediaType==="video"&&!(r.id===t.id&&d)&&e.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"bg-white/80 rounded-full p-2 group-hover:bg-white",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"10",cy:"10",r:"10",fill:"#17C964"}),e.jsx("path",{d:"M7.5 5.5L15 10L7.5 14.5V5.5Z",fill:"white"})]})})})]},t.id))})]})}export{C as G};
