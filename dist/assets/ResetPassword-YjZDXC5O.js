import{u as E,m as B,r,n as M,j as e}from"./index-CU_iZQyH.js";import{I as h,a as f}from"./index-DdsupvCV.js";import{i as k}from"./index-0Q7cGwnK.js";function R(){const b=E(),{code:o}=B(),[n,y]=r.useState(!1),[i,j]=r.useState(!1),[t,u]=r.useState(!1),[m,s]=r.useState(null),[p,S]=r.useState(null),[v]=M(),l=r.useMemo(()=>!o||o.trim().length===0,[o]),N=async a=>{if(a.preventDefault(),t)return;const x=a.currentTarget,w=new FormData(x),d=String(w.get("password")??""),g=String(w.get("confirm")??"");if(!d||!g){s("Password and confirmation are required.");return}if(d.length<8){s("Password must be at least 8 characters long.");return}if(d!==g){s("Passwords do not match.");return}if(l){s("This reset link is invalid or has expired. Please request a new one.");return}u(!0),s(null);try{const c=await v({newPassword:d,resetToken:o}).unwrap();S(c.message||"Password reset successful. You can now sign in."),x.reset(),setTimeout(()=>b("/auth/login"),2e3)}catch(c){if(k(c)){const P=c.response?.data?.message;s(P||"Unable to reset password. Please try again.")}else s("Something went wrong. Please try again later.")}finally{u(!1)}};return r.useEffect(()=>{l&&s("This reset link is invalid or has expired. Please request a new one.")},[l]),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h1",{className:"text-[30px] sm:text-3xl lg:text-[50px] font-semibold text-secondary",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Lorem ipsum dolor sit amet consectetur. Diam platea consequat libero mattis rhoncus interdum neque."}),e.jsxs("form",{onSubmit:N,className:"mt-8 space-y-5",children:[m?e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-600",role:"alert",children:m}):null,p?e.jsx("div",{className:"rounded-md border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-600",role:"status",children:p}):null,e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block mb-1 text-secondary font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:n?"text":"password",placeholder:"Enter password",className:"w-full px-4 py-3 pr-10 border border-[#BEBEBE] rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-colors bg-gray-50 placeholder-[#52525B] text-sm",required:!0,disabled:t}),e.jsx("button",{type:"button",onClick:()=>y(a=>!a),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":n?"Hide password":"Show password",title:n?"Hide password":"Show password",children:e.jsx("span",{className:"text-lg","aria-hidden":!0,children:n?e.jsx(h,{}):e.jsx(f,{})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm",className:"block mb-1 text-secondary font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirm",name:"confirm",type:i?"text":"password",placeholder:"Enter password",className:"w-full px-4 py-3 pr-10 border border-[#BEBEBE] rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-colors bg-gray-50 placeholder-[#52525B] text-sm",required:!0,disabled:t}),e.jsx("button",{type:"button",onClick:()=>j(a=>!a),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":i?"Hide password":"Show password",title:i?"Hide password":"Show password",children:e.jsx("span",{className:"text-lg","aria-hidden":!0,children:i?e.jsx(h,{}):e.jsx(f,{})})})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-secondary text-white py-3 rounded-lg hover:opacity-95 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",disabled:t||l,"aria-busy":t,children:t?"Saving...":"Save"})]})]})}export{R as default};
