import{r as s,l as y,j as e}from"./index-Bm7eXvp5.js";import{i as b}from"./index-0Q7cGwnK.js";import{I as j}from"./Input-BDyt2fuC.js";function S(){const[r,i]=s.useState(!1),[c,a]=s.useState(null),[u,o]=s.useState(null),t=s.useRef(null),[x]=y(),p=s.useCallback(()=>{o(null),t.current!==null&&(window.clearTimeout(t.current),t.current=null)},[]),f=s.useCallback(n=>{o(n),t.current!==null&&window.clearTimeout(t.current),t.current=window.setTimeout(()=>{o(null),t.current=null},6e3)},[]),h=async n=>{n.preventDefault();const d=n.currentTarget,g=new FormData(d),m=String(g.get("email")??"").trim().toLowerCase();if(!m){a("Email is required.");return}a(null),i(!0);try{const l=await x({email:m}).unwrap();f(l.message||"Password reset link sent. Please check your email."),d.reset()}catch(l){if(b(l)){const w=l.response?.data?.message;a(w||"Unable to send reset code. Please try again.")}else a("Something went wrong. Please try again later.")}finally{i(!1)}};return s.useEffect(()=>()=>{t.current!==null&&window.clearTimeout(t.current)},[]),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h1",{className:"text-[30px] sm:text-3xl lg:text-[50px] font-semibold text-secondary",children:"Forget Password"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your email to receive password reset instructions."}),e.jsxs("form",{onSubmit:h,className:"mt-8 space-y-5",children:[c?e.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-600",role:"alert",children:c}):null,e.jsx(j,{id:"email",name:"email",title:"Email",placeholder:"Enter your email",type:"email",required:!0,autoComplete:"email"}),e.jsx("button",{type:"submit",className:`w-full bg-secondary text-white py-3 rounded-lg hover:opacity-95 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed ${r?"scale-[0.99] animate-pulse":""}`,disabled:r,"aria-busy":r?"true":"false",children:r?e.jsx(e.Fragment,{children:e.jsx("span",{className:"h-4 w-4 rounded-full border-2 border-white/70 border-t-white animate-spin"})}):"Send"}),e.jsxs("p",{className:"text-center text-gray-600",children:["Remember password ?, Sign in"," ",e.jsx("a",{href:"/auth/login",className:"text-green-700 hover:underline",children:"here"})]})]}),u?e.jsxs("div",{className:"fixed top-6 right-6 z-50 max-w-sm rounded-lg border border-[#BBF7D0] bg-[#F0FDF4] shadow-[0_10px_30px_rgba(34,197,94,0.25)] px-4 py-3 text-sm text-[#166534] animate-[toast-in_0.3s_ease-out]",role:"status","aria-live":"polite",children:[e.jsx("style",{children:`
                            @keyframes toast-in { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }
                            @keyframes toast-out { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(-6px); } }
                        `}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-0.5 inline-flex h-6 w-6 items-center justify-center rounded-full bg-[#DCFCE7] text-[#166534]",children:e.jsx("svg",{viewBox:"0 0 20 20",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{d:"M16.667 5 8.125 15 3.333 10",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"flex-1 leading-relaxed",children:u}),e.jsx("button",{type:"button",onClick:p,className:"ml-2 text-[#15803D] hover:text-[#166534]/70","aria-label":"Dismiss notification",children:e.jsx("svg",{viewBox:"0 0 20 20",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.8,children:e.jsx("path",{d:"M5 5l10 10M15 5 5 15",strokeLinecap:"round"})})})]})]}):null]})}export{S as default};
