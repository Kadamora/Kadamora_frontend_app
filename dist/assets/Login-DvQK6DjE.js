import{r as l,u as j,c as N,d as v,e as S,j as e,s as E}from"./index-Bm7eXvp5.js";import{I as k,a as L}from"./index-MsUu7Qdg.js";import{a as T}from"./SEO-DR8Q92ZO.js";import{I as m}from"./Input-BDyt2fuC.js";function F(){const[o,u]=l.useState(!1),[t,i]=l.useState(!1),[d,a]=l.useState(null),g=j(),p=N(),x=v(),h=p.state?.from||"/dashboard",[f]=S(),w=async r=>{r.preventDefault();const y=r.currentTarget,c=new FormData(y),b={email:String(c.get("email")??"").trim().toLowerCase(),password:String(c.get("password")??"")};i(!0),a(null);try{const s=(await f(b).unwrap()).data;if(s.user?.isVerified===!1){a("Your email is not verified. Please verify your email before logging in."),i(!1);return}if(!s?.accessToken||!s?.refreshToken){a("Login response is missing credentials. Please try again.");return}x(E({user:s.user,accessToken:s.accessToken,refreshToken:s.refreshToken})),g(h,{replace:!0})}catch(n){const s=n?.data?.message||n?.error||"Unable to log you in with those details. Please try again.";a(s)}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("h1",{className:"text-[30px] sm:text-3xl lg:text-[50px] font-semibold text-secondary",children:"Welcome back !"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to Kadamora by entering your details below or continue with Google."}),e.jsxs("form",{onSubmit:w,className:"mt-8 space-y-5",children:[d?e.jsx("div",{role:"alert",className:"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-600",children:d}):null,e.jsx(m,{id:"email",name:"email",title:"Email",placeholder:"Enter your email",type:"email",required:!0,autoComplete:"email"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{id:"password",name:"password",title:"Password",placeholder:"Enter your password",type:o?"text":"password",required:!0,autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>u(r=>!r),className:"absolute inset-y-0 right-0 top-6 px-3 flex items-center text-gray-500 hover:text-gray-700","aria-label":o?"Hide password":"Show password",children:e.jsx("span",{className:"text-lg","aria-hidden":!0,children:o?e.jsx(k,{}):e.jsx(L,{})})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("a",{href:"/auth/forgot-password",className:"text-green-700 hover:underline",children:"Forget Password ?"})}),e.jsx("button",{type:"submit",className:`w-full bg-secondary text-white py-3 rounded-lg hover:opacity-95 transition-all font-medium flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed ${t?"scale-[0.99] animate-pulse":""}`,disabled:t,"aria-busy":t?"true":"false",children:t?e.jsx(e.Fragment,{children:e.jsx("span",{className:"h-4 w-4 rounded-full border-2 border-white/70 border-t-white animate-spin"})}):"Login"}),e.jsxs("div",{className:"relative py-3 text-center",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-[#E4E4E7]"})}),e.jsx("div",{className:"relative inline-block bg-white px-3 font-bold-",children:"OR"})]}),e.jsxs("button",{type:"button",className:"w-full  bg-[#CCE3FD] py-3 rounded-lg flex items-center justify-center gap-3",title:"Sign in with Google",children:[e.jsx("img",{src:"/assets/icons/google.png",alt:"Google icon",className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Sign in with Google"})]}),e.jsxs("p",{className:"text-center text-gray-600",children:["Donâ€™t have an Account, Sign up"," ",e.jsx("a",{href:"/auth/signup",className:"text-green-700 hover:underline",children:"here"})]})]})]})]})}export{F as default};
